code for blynk #include <WiFi.h>
#include <BlynkSimpleEsp32.h>
#include <ESP32Servo.h> // Correct library for ESP32 Servo control

// --- YOUR BLYNK PROJECT CREDENTIALS ---
#define BLYNK_TEMPLATE_ID   "TMPL60QjC-J7S" 
#define BLYNK_DEVICE_NAME   "MysmartApp" 
#define BLYNK_AUTH_TOKEN    "ztGLfuWRv8lX-GlCMrq9yWP8886C61pN" 

// --- YOUR WIFI CREDENTIALS ---
char ssid[] = "Rabia";        // Your WiFi Name
char password[] = "rabia1234"; // Your WiFi Password

// --- HARDWARE PIN DEFINITIONS ---
const int DOOR_SERVO_PIN = 13; // Connected to the servo signal wire
const int BUZZER_PIN     = 2;  // Connected to the buzzer signal pin (PWM-capable)

// --- SERVO ANGLES ---
const int SERVO_LOCKED   = 0;   // Angle for the locked position
const int SERVO_UNLOCKED = 90;  // Angle for the unlocked position

Servo doorServo; // Create a Servo object
char auth[] = BLYNK_AUTH_TOKEN;


void setup() {
  Serial.begin(115200);
  delay(100);

  // 1. Pin Setup
  pinMode(BUZZER_PIN, OUTPUT);
  
  // 2. Servo Setup
  doorServo.attach(DOOR_SERVO_PIN);
  doorServo.write(SERVO_LOCKED); // Start in the locked position
  
  // 3. Wi-Fi & Blynk Connection
  Serial.print("Connecting to WiFi...");
  WiFi.begin(ssid, password);
  while (WiFi.status() != WL_CONNECTED) {
    delay(500);
    Serial.print(".");
  }
  Serial.println("\nWiFi Connected. Starting Blynk...");
  Blynk.begin(auth, ssid, password);
}


// --- V1: LOCK DOOR BUTTON ---
BLYNK_WRITE(V1)
{
  if (param.asInt() == 1) // Only react on button press (PUSH mode)
  {
    doorServo.write(SERVO_LOCKED);
    noTone(BUZZER_PIN); // Ensure buzzer is off when locking
    Serial.println("V1 Pressed: Door Locked.");
  }
}

// --- V2: UNLOCK DOOR BUTTON ---
BLYNK_WRITE(V2)
{
  if (param.asInt() == 1) // Only react on button press (PUSH mode)
  {
    doorServo.write(SERVO_UNLOCKED);
    noTone(BUZZER_PIN); // Ensure buzzer is off when unlocking
    Serial.println("V2 Pressed: Door Unlocked.");
  }
}

// --- V3: DISARM ALARM BUTTON ---
BLYNK_WRITE(V3)
{
  if (param.asInt() == 1) // Only react on button press (PUSH mode)
  {
    // This is the core logic to silence the alarm/buzzer
    noTone(BUZZER_PIN);
    Serial.println("V3 Pressed: Alarm Disarmed and Silenced.");
  }
}


void loop() {
  Blynk.run(); // This keeps the connection to the Blynk server active
  // Add any other continuous code here (e.g., checking sensors, triggering alarm)
}